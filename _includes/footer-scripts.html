<!-- Y.E.T. Compassion — Footer Scripts -->

<!-- Scroll-triggered animations and counter -->
<script>
document.addEventListener('DOMContentLoaded', function() {

  // ── Scroll Reveal Animation ──
  // Content is visible by default (CSS). We only hide & animate
  // after confirming JS is running — prevents invisible sections.
  const revealElements = document.querySelectorAll('.reveal-on-scroll');

  if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
    // No animation needed — content already visible via CSS default
    return;
  }

  if (revealElements.length > 0) {
    // Signal CSS that JS is ready to manage animations
    document.body.setAttribute('data-reveal-ready', '');

    const revealObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('revealed');
          revealObserver.unobserve(entry.target);
        }
      });
    }, { threshold: 0.05 });

    revealElements.forEach(el => revealObserver.observe(el));

    // Fallback: reveal any elements already in viewport on page load
    requestAnimationFrame(() => {
      revealElements.forEach(el => {
        const rect = el.getBoundingClientRect();
        if (rect.top < window.innerHeight && rect.bottom > 0) {
          el.classList.add('revealed');
          revealObserver.unobserve(el);
        }
      });
    });
  }

  // ── Impact Counter Animation ──
  const counters = document.querySelectorAll('.counter-value');

  const counterObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const target = parseInt(entry.target.getAttribute('data-target'));
        const suffix = entry.target.getAttribute('data-suffix') || '';
        const prefix = entry.target.getAttribute('data-prefix') || '';
        const duration = 1500;
        const startTime = performance.now();

        function updateCounter(currentTime) {
          const elapsed = currentTime - startTime;
          const progress = Math.min(elapsed / duration, 1);
          // Ease-out cubic
          const eased = 1 - Math.pow(1 - progress, 3);
          const current = Math.floor(eased * target);
          entry.target.textContent = prefix + current.toLocaleString() + suffix;

          if (progress < 1) {
            requestAnimationFrame(updateCounter);
          } else {
            entry.target.textContent = prefix + target.toLocaleString() + suffix;
          }
        }

        requestAnimationFrame(updateCounter);
        counterObserver.unobserve(entry.target);
      }
    });
  }, { threshold: 0.5 });

  counters.forEach(counter => counterObserver.observe(counter));

  // ── Mobile Navigation ──
  const mobileToggle = document.querySelector('.navbar-toggler');
  const body = document.body;

  if (mobileToggle) {
    mobileToggle.addEventListener('click', function() {
      body.classList.toggle('mobile-nav-open');
    });

    // Close on Escape
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape' && body.classList.contains('mobile-nav-open')) {
        body.classList.remove('mobile-nav-open');
        mobileToggle.focus();
      }
    });
  }

  // ── Donate Button Styling ──
  const donateLinks = document.querySelectorAll('.donate-nav-btn, a[href*="donate"]');
  donateLinks.forEach(link => {
    if (link.closest('.navbar')) {
      link.classList.add('btn-donate');
    }
  });

  // ── Smooth Scroll for Anchor Links ──
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        e.preventDefault();
        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    });
  });

});
</script>

<!-- JSON-LD Organization Schema (Global) -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "NGO",
  "name": "Youth Evangelism Training (Y.E.T.) Compassion",
  "alternateName": "Y.E.T. Compassion",
  "url": "https://www.yetcompassion.org",
  "logo": "https://www.yetcompassion.org/images/logo.png",
  "description": "Y.E.T. Compassion equips South Sudanese diaspora youth with the Gospel of Christ and the practical skills to lead with integrity, build stable families, and transform their communities.",
  "founder": {
    "@type": "Person",
    "name": "Gai Bol Luom",
    "jobTitle": "Founder"
  },
  "foundingDate": "2024",
  "areaServed": [
    { "@type": "Country", "name": "United States" },
    { "@type": "Country", "name": "South Sudan" }
  ],
  "address": {
    "@type": "PostalAddress",
    "addressLocality": "Nashville",
    "addressRegion": "TN",
    "addressCountry": "US"
  },
  "sameAs": [
    "https://www.facebook.com/YetCompassion",
    "https://www.linkedin.com/company/yetcompassion"
  ]
}
</script>
